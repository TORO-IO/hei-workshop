<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">

	<title>reveal.js - The HTML Presentation Framework</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
	<link rel="stylesheet" href="/controldeck/reveal.js/css/reveal.css">
	<link rel="stylesheet" href="/controldeck/reveal.js/css/theme/night.css" id="theme">
  <link rel="stylesheet" href="/controldeck/reveal.js/lib/css/zenburn.css">
  <link rel="stylesheet" href="/controldeck/app.css">
	<style>
		pre {
			margin: 0 auto !important;
			box-shadow: none !important;
		}
		code {
			max-height: 620px !important;
		}
		gCode {
			color: #18CB18;
			font-family: monospace;
		}
		h2 {
			color: #4FCFFF !important;
		}
		h4 {
			color: #4FCFFF !important;
		}
	</style>

</head>
<body id="body">
  <div class="toro-io">
    <a href="https://www.toro.io/" target="_blank" class="toro-io-heading">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 4547 1225.844">
        <path id="T" class="cls-1" d="M221.157,153.293H-7.539V1H615.193V153.293H386.5V751.742H221.157V153.293Z" transform="translate(0 -0.156)"></path>
        <path id="O" class="cls-1" d="M1164.92,2.393c-0.23-.067-0.43-0.163-0.66-0.227-0.33-.094-0.65-0.125-0.99-0.211-1.03-.258-2.04-0.56-3.08-0.814l-0.03.155c-14.46-2.705-27.35,1.616-29.74,10.573-2.6,9.755,8.18,21.2,24.09,25.712v0.151c112.87,39.818,193.8,147.315,193.8,273.868,0,160.453-130.01,290.53-290.38,290.53S767.551,472.053,767.551,311.6c0-126.553,80.935-234.054,193.8-273.872l-0.06-.094,0-.026c15.721-4.454,26.329-15.666,23.723-25.258-2.629-9.687-17.74-14.023-33.746-9.672a49.2,49.2,0,0,0-4.886,1.653C779.068,50.389,666.2,197.239,666.2,370.327v2.111c0,209.667,163.222,379.3,390.7,379.3,227.45,0,392.77-171.737,392.77-381.411v-2.1C1449.66,192.884,1335.34,45.909,1164.92,2.393Z" transform="translate(0 -0.156)"></path>
        <path id="R" class="cls-1" d="M1530.66,0.837h343.13c95.44,0,169.43,26.816,218.75,76.148,41.81,41.83,64.33,100.807,64.33,171.594v2.149c0,121.19-65.4,197.331-160.83,232.721l183.35,268.125H1986.38L1825.53,511.335H1695.79V751.574H1530.66V0.837Zm332.41,364.649c80.42,0,126.53-42.9,126.53-106.176v-2.142c0-70.787-49.32-107.262-129.75-107.262H1695.79v215.58h167.28Z" transform="translate(0 -0.156)"></path>
        <path id="O-2" data-name="O" class="cls-1" d="M2747.54,2.744c-0.22-.067-0.42-0.163-0.65-0.227-0.34-.095-0.66-0.125-0.99-0.212-1.03-.257-2.04-0.56-3.08-0.813l-0.03.155c-14.46-2.7-27.33,1.615-29.72,10.567-2.6,9.75,8.17,21.193,24.07,25.7v0.151c112.8,39.8,193.69,147.232,193.69,273.713,0,160.361-129.93,290.363-290.2,290.363s-290.2-130-290.2-290.363c0-126.481,80.88-233.921,193.68-273.716l-0.06-.095V37.937c15.71-4.451,26.31-15.657,23.7-25.243-2.62-9.681-17.72-14.015-33.72-9.666a48.739,48.739,0,0,0-4.88,1.652c-167.21,46.032-280.02,192.8-280.02,365.787v2.11c0,209.547,163.12,379.083,390.45,379.083,227.31,0,392.53-171.639,392.53-381.193v-2.1C3032.11,193.125,2917.86,46.234,2747.54,2.744Z" transform="translate(0 -0.156)"></path>
        <circle id="_." data-name="." class="cls-2" cx="3190.91" cy="670.938" r="81.25"></circle>
        <rect id="I" class="cls-2" x="3338.84" y="0.188" width="166.66" height="750"></rect>
        <path id="O-3" data-name="O" class="cls-1" d="M4077,2.744c-0.23-.067-0.43-0.163-0.65-0.227-0.34-.095-0.66-0.125-1-0.212-1.03-.257-2.04-0.56-3.08-0.813l-0.02.155c-14.46-2.7-27.34,1.615-29.72,10.567-2.61,9.75,8.17,21.193,24.07,25.7v0.151c112.8,39.8,193.68,147.232,193.68,273.713,0,160.361-129.93,290.363-290.2,290.363s-290.2-130-290.2-290.363c0-126.481,80.89-233.921,193.69-273.716l-0.06-.095-0.01-.026c15.71-4.451,26.32-15.657,23.71-25.243-2.63-9.681-17.73-14.015-33.72-9.666a48.931,48.931,0,0,0-4.89,1.652c-167.21,46.032-280.01,192.8-280.01,365.787v2.11c0,209.547,163.12,379.083,390.45,379.083,227.31,0,392.53-171.639,392.53-381.193v-2.1C4361.57,193.125,4247.32,46.234,4077,2.744Z" transform="translate(0 -0.156)"></path>
        <path id="TM" class="cls-1" d="M4412.19,14.787h-23.61V0.161h64.55V14.787h-23.61V79.256h-17.33V14.787Zm49.94-14.626h24.38l18.43,54.4h0.24l17.42-54.4h24.39v79.1h-16.23V23.2h-0.22l-19.3,56.051h-13.36l-19.3-55.495h-0.22V79.256h-16.23V0.161Z" transform="translate(0 -0.156)"></path>
      </svg>
    </a><!-- end of toro-io-heading -->
  </div><!-- end of .toro-io watermark -->


  <div class="reveal">
    <div class="slides">

      <!-- Page 0 -->
      <section data-state="blur-on">
        <h1>Single-Page Application using AngularJs</h1>
        <h4>
          HTML5 Presentation Framework powered by
          <a href="https://github.com/hakimel/reveal.js">reveal.js</a>
        </h4>
        <p>
          <small>Presented By Mykel Ray Perez</small><br>
          <a href="#" target="_blank"><i class="ion-social-github"></i></a> &nbsp;
          <a href="#" target="_blank"><i class="ion-social-twitter"></i></a> &nbsp;
          <a href="#" target="_blank"><i class="ion-social-codepen"></i></a> &nbsp;
        </p>
      </section>
			<!-- end of page 0 -->

			<!-- Page 1 -->
			<section>
				<section>
					<h2>Download the Project</h2>
					<a href="https://github.com/TORO-IO/hei-workshop/archive/spa.zip" download>spa.zip (less than 1mb)</a>
				</section>
				<section>
					<u style="text-decoration: none; text-align: left;">
						<li style="margin-top: 20px;">Extract the downloaded zip file</li>
						<li style="margin-top: 20px;">Open the extracted folder with your favorite code editor</li>
						<li style="margin-top: 20px;">Open your terminal/console</li>
						<li style="margin-top: 20px;"><gCode>cd</gCode> to the extracted folder's directory</li>
						<li style="margin-top: 20px;">run <gCode>node server.js</gCode></li>
					</u>
				</section>
			</section>
			<!-- end of page 1 -->

			<!-- Page 2 -->
      <section>
				<section>
					<h2>What is a Single-Page App?</h2>
					<p class="fragment" style="color: #e7ad52;">Loads a single HTML page</p>
					<p class="fragment" style="color: #e7ad52;">Dynamically update that page as the user interacts</p>
				</section>

				<section>
					<h2>Traditional Lifecycle</h2>
					<img src="assets/traditional-lifecycle.png"/>
				</section>

				<section>
					<h2>SPA Lifecycle</h2>
					<img src="assets/spa-lifecycle.png"/>
				</section>

				<section>
					<h2>Advantages of SPA</h2>
					<p class="fragment" style="color: #e7ad52;">Reduced server load</p>
					<p class="fragment" style="color: #e7ad52;">Applications are more fluid and responsive</p>
					<p class="fragment" style="color: #e7ad52;">Separation of presentation and application logic</p>
				</section>

				<section>
					<h2>Disadvantages of SPA</h2>
					<p class="fragment" style="color: #e7ad52;">Your webapp is headless <span class="fragment">( there will be some problems with SEO )</span></p>
					<p class="fragment" style="color: #e7ad52;">Currently, Google and Bing performs crawling to execute your webapp's javascript and render the contents</p>
				</section>
      </section>
			<!-- end of page 2 -->

			<!-- Page 3 -->
			<section>
				<h2>What Is Angular?</h2>
				<p class="fragment" style="color: #e7ad52;">AngularJS is a structural framework for dynamic web apps</p>
				<p class="fragment" style="color: #e7ad52;">It lets you use HTML as your template language</p>
				<p class="fragment" style="color: #e7ad52;">It lets you extend HTML's syntax to express your application's components clearly and succinctly</p>
				<p class="fragment" style="color: #e7ad52;">Angular's data binding and dependency injection eliminate much of the code you would otherwise have to write</p>
				<p class="fragment" style="color: #e7ad52;">Angular is what HTML would have been, had it been designed for applications</p>
			</section>
			<!-- end of page 3 -->



			<!-- Page 4 -->
			<section>
				<h4>app.js</h2>
				<pre>
					<code class="hljs" contenteditable="" data-trim="">
angular
  .module('app', [])
					</code>
				</pre>
				<h4>index.html</h2>
				<pre>
					<code class="hljs" contenteditable="" data-trim="">
&lt;html ng-app="app"&gt;
  &lt;body&gt;
    <a href="/">Home</a>
    <a href="/login">Login</a>

    <script src="/stable/bower_components/angular/angular.js"></script>
    <script src="/app.js"></script>
  &lt;/body&gt;
&lt;/html&gt;
					</code>
				</pre>
			</section>
			<!-- end of page 4 -->

			<!-- Page 5 -->
			<section>
				<section>
					<h4>views/login.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
<h5>Login</h5>
<input ng-model="credentials.username" type="text">
<input ng-model="credentials.password" type="text">
<button ng-click="login()" type="button">Login</button>
						</code>
					</pre>
				</section>

				<section>
					<h3>Dependency Injection</h3>
					<p class="fragment" style="color: #e7ad52;">Dependency Injection (DI) is a software design pattern that deals with how components get hold of their dependencies</p>
					<p class="fragment" style="color: #e7ad52;">The Angular injector subsystem is in charge of creating components, resolving their dependencies, and providing them to other components as requested</p>
				</section>

				<section>
					<h4>index.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
<script src="/stable/bower_components/angular-route/angular-route.js"></script>
<script src="/stable/bower_components/ngstorage/ngStorage.js"></script>
						</code>
					</pre>

					<h4>app.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="" style="max-height: 440px !important;">
angular
  .module('app', [
    'ngRoute',
    'ngStorage'
  ])
  .config( AppConfig )

AppConfig.$inject = [
  '$routeProvider',
  '$locationProvider'
]

function AppConfig ($routeProvider, $locationProvider) {
  $locationProvider.html5Mode({
    enabled: true,
    requireBase: false
  });

  $routeProvider
    .when('/', {
      template: '<home></home>'
    })

    .when('/login', {
      template: '<login></login>'
    })
}
						</code>
					</pre>
				</section>

				<section>
					<h3>ngView directive</h3>
					<p class="fragment" style="color: #e7ad52;">ngView is a directive that complements the <strong>$route</strong> service by including the rendered template of the current route into the main layout (index.html) file</p>
					<p class="fragment" style="color: #e7ad52;">Every time the current route changes, the included view changes with it according to the configuration of the $route service</p>
					<h4>index.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
&lt;html ng-app="app"&gt;
  &lt;body&gt;
    <a href="/">Home</a>
    <a href="/login">Login</a>

    <div ng-view></div>

    <script src="/stable/bower_components/angular/angular.js"></script>
    <script src="/stable/bower_components/angular-route/angular-route.js"></script>
    <script src="/stable/bower_components/ngstorage/ngStorage.js"></script>
    <script src="/app.js"></script>
  &lt;/body&gt;
&lt;/html&gt;
						</code>
					</pre>
				</section>

			</section>
			<!-- end of page 5 -->

			<!-- Page 6 -->
			<section>
				<section>
					<h3>What are Directives?</h3>
					<p class="fragment" style="color: #e7ad52;">Directives are markers on a DOM element (such as an attribute, element name, comment or CSS class) that tells AngularJS's HTML compiler to attach a specified behavior to that DOM element or even to transform the DOM element and its children</p>
					<p class="fragment" style="color: #e7ad52;">Angular comes with a set of these directives built-in, like ngBind, ngModel, and ngClass</p>
					<p class="fragment" style="color: #e7ad52;">You can create your own directives for Angular to use</p>
				</section>

				<section>
					<h4>javascript/directives.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
angular
  .module('app')
  .directive('login', login)

function login () {
  var directive = {
    restrict: 'E',
    templateUrl: '/views/login.html'
  }

  return directive
}
						</code>
					</pre>
					<h4>index.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
<script src="/javascript/directives.js"></script>
						</code>
					</pre>
				</section>

			</section>
			<!-- end of page 6 -->

			<!-- Page 7 -->
			<section>
				<section>
					<h3>Services</h3>
					<p class="fragment" style="color: #e7ad52;">Angular services are substitutable objects that are wired together using dependency injection (DI)</p>
					<p class="fragment" style="color: #e7ad52;">You can use services to organize and share code across your app</p>
				</section>

				<section>
					<h4>javascript/factories.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
angular
  .module('app')
  .factory('api', ApiFactory)

ApiFactory.$inject = [
  '$rootScope',
  '$http',
  '$q',
  '$location',
  '$localStorage'
]

function ApiFactory ( $rootScope, $http, $q, $location, $localStorage ) {
  var api = this;
  var baseurl = 'https://hei-workshop.herokuapp.com/api/';
  var headers = {
    'Content-Type': 'application/json',
    'Authorization': ( $localStorage.token ) ?
      'Bearer ' + $localStorage.token : undefined
  }

  api.setToken = function( token ) {
    ( token ) ?
      $localStorage.token = token : delete $localStorage.token
    headers.Authorization = ( token ) ?
      'Bearer ' + token : undefined
    $rootScope.$broadcast('token::set');
  }

  api.login = function( credentials ) {
    return $http.post( baseurl + 'login', credentials, {headers} )
      .then( handleSuccess, handleError );
  }

  api.post = function( blog ) {
    return $http.post( baseurl + 'blogs', blog, {headers} )
      .then( handleSuccess, handleError );
  }

  api.getBlogs = function() {
    return $http.get( baseurl + 'blogs', {headers} )
      .then( handleSuccess, handleError );
  }

  api.getBlog = function( id ) {
    return $http.get( baseurl + 'blogs/' + id, {headers} )
      .then( handleSuccess, handleError );
  }

  api.deleteBlog = function( id ) {
    return $http.delete( baseurl + 'blogs/' + id, {headers} )
      .then( handleSuccess, handleError );
  }

  function handleSuccess(response) {
    return response.data;
  }

  function handleError(error) {
    switch( error.status ) {
      case 401:
      case -1:
        api.setToken();
        $location.path( '/login' )
        return $q.reject( error.status );
        break;
      default:
        return $q.reject( error.status );
    }
  }

  return this
}
						</code>
					</pre>
				</section>

				<section>
					<h3>$http service</h3>
					<p class="fragment" style="color: #e7ad52;">The <strong>$http</strong> service is a core Angular service that facilitates communication with the remote HTTP servers via the browser's XMLHttpRequest object or via JSONP</p>
					<h3 class="fragment">$q service</h3>
					<p class="fragment" style="color: #e7ad52;">The <strong>$q</strong> service that helps you run functions asynchronously, and use their return values (or exceptions) when they are done processing</p>
				</section>

				<section>
					<h4>index.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
<script src="/javascript/factories.js"></script>
						</code>
					</pre>
				</section>

				<section>
					<h3>Controllers</h3>
					<p class="fragment" style="color: #e7ad52;">
						AngularJS applications are controlled by <span class="fragment"><strong>controllers</strong></span>
					</p>
					<p class="fragment" style="color: #e7ad52;">A Controller is defined by a JavaScript constructor function that is used to augment the Angular Scope</p>
				</section>

				<section>
					<h3>What are Scopes?</h3>
					<p class="fragment" style="color: #e7ad52;">Scope is an object that refers to the application model</p>
				</section>

				<section>
					<h4>javascript/directives.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
angular
  .module('app')
  .directive('login', login)

function login () {
  var directive = {
    restrict: 'E',
    templateUrl: '/views/login.html',
    controller: LoginCtrl
  }

  return directive
}

LoginCtrl.$inject = [
  '$scope',
  '$location',
  'api'
]

function LoginCtrl ($scope, $location, api) {
  $scope.credentials = {
    username: '',
    password: ''
  }

  $scope.login = function () {
    api.login( $scope.credentials )
      .then( function(response) {
        api.setToken( response.token );
        $location.path( '/' );
      }, function (error) {
        alert('Something went wrong');
      });
  }
}
						</code>
					</pre>
				</section>

				<section>
					<h3>ngModel directive</h3>
					<p class="fragment" style="color: #e7ad52;">The ngModel directive binds an input,select, textarea (or custom form control) to a property on the <strong>scope</strong></p>
					<h4 class="fragment">views/login.html</h4>
					<pre class="fragment">
						<code class="hljs" contenteditable="" data-trim="">
<h5>Login</h5>
<input ng-model="credentials.username" type="text">
<input ng-model="credentials.password" type="text">
<button ng-click="login()" type="button">Login</button>
						</code>
					</pre>
				</section>
			</section>
			<!-- end of page 7 -->

			<!-- Page 8 -->
			<section>
				<section>
					<h4>index.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
&lt;html ng-app="app" ng-controller="user"&gt;
...
<script src="/javascript/controllers.js"></script>
						</code>
					</pre>
					<h4>javascript/controllers.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
angular
  .module('app')
  .controller('user', userController)

userController.$inject = [
  '$scope',
  '$localStorage',
  'api'
]

function userController ($scope, $localStorage, api) {
  $scope.loggedIn = $localStorage.token != undefined;

  $scope.logout = function() {
    api.setToken();
  }

  $scope.$on('token::set', function() {
    $scope.loggedIn = $localStorage.token != undefined;
  })
}
						</code>
					</pre>
				</section>

				<section>
					<h4>ngIf directive</h4>
					<p class="fragment" style="color: #e7ad52;">The ngIf directive removes or recreates a portion of the DOM tree based on an {expression}</p>
					<p class="fragment" style="color: #e7ad52;">If the expression assigned to ngIf evaluates to a false value then the element is removed from the DOM, otherwise a clone of the element is reinserted into the DOM</p>
					<h4>index.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="" style="max-height: 530px;">
<a href="/">Home</a>
<a ng-if="loggedIn == false" href="/login">Login</a>
<span ng-if="loggedIn == true">
  <a href="/post">Post</a>
  <a ng-click="logout()" href="/">Logout</a>
</span>
<hr>
						</code>
					</pre>
				</section>
			</section>
			<!-- end of page 8 -->

			<!-- Page 9 -->
			<section>
				<section>
					<h4>app.js</h4>
					<pre>
					<code class="hljs" contenteditable="" data-trim="">
$routeProvider
  .when('/', {
    template: '<home></home>'
  })

  .when('/login', {
    template: '<login></login>'
  })

  .when('/post', {
    template: '<post></post>'
  })
						</code>
					</pre>
					<h4>javascript/directives.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
angular
  .module('app')
  .directive('login', login)
  .directive('post', post)
						</code>
					</pre>
				</section>

				<section>
					<h4>javascript/directives.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
function post () {
  var directive = {
    restrict: 'E',
    templateUrl: '/views/post.html',
    controller: PostCtrl
  }

  return directive
}

PostCtrl.$inject = [
  '$scope',
  '$location',
  'api'
]

function PostCtrl ($scope, $location, api) {
  $scope.blog = {
    title: '',
    content: ''
  }

  $scope.post = function () {
    api.post( $scope.blog )
      .then( function(response) {
        $location.path( '/' );
      }, function (error) {
        alert('Something went wrong');
      });
    }
}
						</code>
					</pre>
				</section>

				<section>
					<h4>views/post.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
<h5>Title</h5>
<input ng-model="blog.title" type="text">
<h5>Content</h5>
<textarea ng-model="blog.content" rows="8"></textarea><br>
<button ng-click="post()" type="button">Post</button>
						</code>
					</pre>
				</section>

			</section>
			<!-- end of page 9 -->

			<!-- Page 10 -->
			<section>
				<section>
					<h4>javascript/directives.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
angular
  .module('app')
  .directive('home', home)
  .directive('login', login)
  .directive('post', post)
						</code>
					</pre>
				</section>

				<section>
					<h4>javascript/directives.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
function home () {
  var directive = {
    restrict: 'E',
    templateUrl: '/views/home.html',
    controller: BlogsCtrl
  }

  return directive
}

BlogsCtrl.$inject = [
  '$scope',
  'api'
]

function BlogsCtrl ($scope, api) {
  api.getBlogs()
    .then( function(response) {
      $scope.blogs = response;
    }, function (error) {
      alert('Something went wrong');
    });
}
						</code>
					</pre>
				</section>

				<section>
					<h3>ngRepeat directive</h3>
					<p class="fragment" style="color: #e7ad52;">The ng-repeat directive repeats an HTML element</p>
					<h3 class="fragment">Data Binding</h3>
					<p class="fragment" style="color: #e7ad52;">The {{ blog }} expression, in the example below, is an AngularJS data binding expression</p>
					<h4>views/home.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
<div ng-repeat="blog in blogs">
  <h1>{{ blog.title }}</h1>
  &lt;pre&gt;
{{ blog.content }}
  &lt;/pre&gt;
  <a href="/view/{{ blog.id }}">View blog</a>
  <hr>
</div>
						</code>
					</pre>
				</section>
			</section>
			<!-- end of page 10 -->

			<!-- Page 11 -->
			<section>
				<section>
					<h4>app.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
$routeProvider
  .when('/', {
    template: '<home></home>'
  })

  .when('/login', {
    template: '<login></login>'
  })

  .when('/post', {
    template: '<post></post>'
  })

  .when('/view/:id', {
    template: '<blog></blog>'
  })
						</code>
					</pre>
					<h4>javascript/directives.js</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
angular
  .module('app')
  .directive('home', home)
  .directive('login', login)
  .directive('post', post)
  .directive('blog', blog)
						</code>
					</pre>
				</section>

				<section>
					<h4>javascript/directives.js</h4>
					<pre style="width: 95% !important;">
						<code class="hljs" contenteditable="" data-trim="">
function blog () {
  var directive = {
    restrict: 'E',
    templateUrl: '/views/blog.html',
    controller: BlogCtrl
  }

  return directive
}

BlogCtrl.$inject = [
  '$scope',
  '$location',
  '$routeParams',
  'api'
]

function BlogCtrl ($scope, $location, $routeParams, api) {
  $scope.editMode = false;

  api.getBlog( $routeParams.id )
    .then( function(response) {
      $scope.blog = response;
    }, function (error) {
      alert('Something went wrong');
    $location.path( '/' );
  });

  $scope.edit = function (option) {
    $scope.editMode = option;
    ( option == true ) ?
      $scope.unsavedBlog = angular.copy( $scope.blog ) : $scope.blog = $scope.unsavedBlog
  }

  $scope.update = function () {
    api.post( $scope.blog )
      .then( function(response) {
        $scope.editMode = false;
      }, function (error) {
        alert('Something went wrong');
      });
  }

  $scope.delete = function () {
    api.deleteBlog( $scope.blog.id )
      .then( function(response) {
        $location.path( '/' );
      }, function (error) {
        alert('Something went wrong');
    });
  }
}
						</code>
					</pre>
				</section>

				<section>
					<h4>views/blog.html</h4>
					<pre>
						<code class="hljs" contenteditable="" data-trim="">
<span ng-if="editMode != true">
  <h1>{{ blog.title }}</h1>
  &lt;pre&gt;
{{ blog.content }}
  &lt;/pre&gt;

  <button ng-click="edit(true)" type="button">Edit</button>
  <button ng-click="delete()" type="button">Delete</button>
</span>

<span ng-if="editMode == true">
  <h5>Title</h5>
  <input ng-model="blog.title" type="text">
  <h5>Content</h5>
  <textarea ng-model="blog.content" rows="8"></textarea><br>

  <button ng-click="update()" type="button">Save</button>
  <button ng-click="edit(false)" type="button">Cancel</button>
</span>
						</code>
					</pre>
				</section>
			</section>
			<!-- end of page 11 -->

			<section>
				<section>
					<h2>Questions?</h2>
				</section>
				<section>
					<h2>That's all<br>Thank you!</h2>
				</section>
			</section>

    </div><!-- end of .slides -->
  </div><!-- end of .reveal -->

  <script src="/controldeck/reveal.js/lib/js/head.min.js"></script>
	<script src="/controldeck/reveal.js/js/reveal.js"></script>
	<script src="/controldeck/app.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/controldeck/deck.js"></script>

</body>
</html>
